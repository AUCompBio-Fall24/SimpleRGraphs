---
title: "Simple Graphs in R"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(devtools)
library(tidyverse)
library(WILD7150)
knitr::opts_chunk$set(echo = FALSE)
```

## Purpose

This tutorial was adapted from [Frank McCown's](https://sites.harding.edu/fmccown/r/) site on simple graphs in R. Once complete, students should be familiar with the **following learning objectives**:
 
* Learn to create different graphs using basic R functions
  + Line Graphs
  + Bar Graphs 
  + Pie Graphs
  + Histograms
  + Dot Graphs
* Learn to manipulate and customize graphs created with base R
* Apply rendering methods from *Week* videos to create a PDF of graphs

**Submission**

For lab assignment #8, use dataset #1 and dataset #2 to create graphs similar to those produced in this tutorial. Choose an appropriate subset of the data for the type of graph you are making. Use this week's lecture videos to render a PDF of plots from **ONE** dataset. Submit this PDF along with your response in a text file `LAST_NAME_Reflection9.txt` to the following reflection question on Canvas:

*You how important it is to use the correct type of graphic to accurately represent your data, but pie graphics typically have a poor reputation in the scientific community for most data. Why do you think that is? When do you think pie graphics can be useful?*

## Getting Started

This tutorial package was created in Rstudio using R markdown and integrated with an R shiny interface for an interactive experience.

This tutorial package is being shared with you in **source** format, which means that editing/moving files with disrupt functionality of the code. **If you have this issue, re-install the package from Github.**  

The interactive code blocks behave just as they would in R. If you get stuck somewhere, use the solution button for guidance!

If you have any questions, or find any issues, please let me know at adc0032@auburn.edu! 

*Here's a simple exercise with an empty code chunk provided for entering the answer.*

Write the R code required to add two plus two:

```{r two-plus-two, exercise=TRUE, exercise.lines = 1}

```

```{r two-plus-two-solution}
2+2
```

### Next Steps

Easy enough, right?! 

You will be using datasets borrowed from
[Dr. Todd Steury's WILD 7150 course](http://webhome.auburn.edu/~tds0009/wild7150.html) in a package I created called "WILD7150".  This tutorial uses `agingtrees` (dataset #3 from Dr. Steury's website). Go back and use `pickygrasshoppers` and `hormonaltrees` (datasets #1 and #2) with the commands you've used in this tutorial to produce similar plots. 

Here's a quick look at `agingtrees`.
This dataset contains tree height at different ages for 16 individual trees. 

Modify the following code to limit the number of rows printed to 5:

```{r print-limit, exercise=TRUE, exercise.eval=TRUE, exercise.lines = 1}
agingtrees
```
 
```{r print-limit-solution}
head(agingtrees)
```

## Line Graphs

### Subsetting

Let's say we are interested in looking at tree height for individual 5 at all ages in our data.

Modify the following code to subset "individual 5" data into vector `ind5`:

```{r subset-ind5, exercise=TRUE, exercise.eval=FALSE}
# Define the ind5 vector with a subset of the data for individual 5
# Within tidyverse are a multitude of packages, here we are using dplyr's filter function

ind5 agingtrees %>% filter(Individual == "")
ind5
```

```{r subset-ind5-solution}
ind5 <- agingtrees %>% filter(Individual == "5")
ind5
```

### Plotting

Nice! It looks like we've successfully filtered the dataset to only include data from individual 5 within the vector `ind5`

What about a plot? Run the code below to graph height with default settings:

```{r plot-subset-ind5, exercise=TRUE, exercise.eval=FALSE}
ind5 <- agingtrees %>% filter(Individual == "5")

# Graph of size values for individual 5
plot(ind5$Size)
```

Let's add a title and other details to the graph by personalizing the points with a color and overlaying a line

```{r plot2-subset-ind5, exercise=TRUE, exercise.eval=FALSE}
ind5 <- agingtrees %>% filter(Individual == "5")

# Graph of size values for individual 5 with customization
plot(ind5$Size, type = "o", col = "orange")

# Adding a title with customization
title(main = "Individual 5 Heights", col.main = "blue", font.main = 4)
```

### Height by Age

Realistically, we are not interested in looking at height by themselves, we are interested in height based on age. 

Use `~` to plot *height by age* :

```{r plot3-subset-ind5, exercise=TRUE, exercise.eval=FALSE, exercise.lines = 8}
ind5 <- agingtrees %>% filter(Individual == "5")

# Graph of size values for each age value for individual 5 with customization
plot(ind5$Size, type = "o", col = "orange")

# Adding a title with customization
title(main = "Tree ID 5 Heights for Age(YR) 10 to 20 ", col.main = "blue", font.main = 4)
```

```{r plot3-subset-ind5-solution}
ind5 <- agingtrees %>% filter(Individual == "5")
plot(ind5$Size~ind5$Age, type = "o", col = "orange")
title(main = "Tree ID 5 Heights for Age(YR) 10 to 20 ", col.main = "blue", font.main = 4)
```

*If you are wondering why it looks the same (except for the x axis), it is because the data is organized by increasing age, and therefore matches the index of values.*


### Adding A Tree

Let's add data from tree ID 2 to our graph:

```{r two-trees, exercise=TRUE, exercise.eval=FALSE, exercise.lines = 10}
ind5 <- agingtrees %>% filter(Individual == "5")
# Subset data for tree ID 2
ind2 <- 

plot(ind5$Size~ind5$Age, type = "o", col = "orange")
# Graph ind2 with grey lines and square points
lines(ind2$Size~ind2$Age, type="o", pch=22, lty=2, col="grey")

title(main = "Tree ID 5 Heights for Age(YR) 10 to 20 ", col.main = "blue", font.main = 4)
```

```{r two-trees-solution}
ind5 <- agingtrees %>% filter(Individual == "5")
ind2 <- agingtrees %>% filter(Individual == "2")

plot(ind5$Size~ind5$Age, type = "o", col = "orange")
lines(ind2$Size~ind2$Age, type="o", pch=22, lty=2, col="grey")
title(main = "Tree ID's 2 & 5 Heights for Age(YR) 10 to 20 ", col.main = "blue", font.main = 4)
```

### Adding more data and some PIZZAZZ!

These are base R graphs (and there is nothing wrong with that, hehe), but they need a bit of sprucing (editing colors, shapes, labels, legends, etc.)

This time we are going to subset data from 3 trees, and update colors, shapes, and axis titles.

Here I'm utilizing `tidyverse` packages to create a new format for plotting:

```{r final-subset,exercise=TRUE, exercise.eval=FALSE, exercise.lines = 13 }
# vectoring data I am interested in, and making a new tibble (data frame)
ind2 <- agingtrees %>% filter(Individual == "2") %>% select(Size) %>% tibble() %>% rename(Tree2 = Size)
ind5 <- agingtrees %>% filter(Individual == "5") %>% select(Size) %>% tibble() %>% rename(Tree5 = Size)

# Here we are: piping agingtrees to filter by individual, selecting the size column, converting to data frame, and renaming the column
ind13 <- agingtrees %>% filter(Individual == "13") %>%
          select(Size) %>% tibble() %>% rename(Tree13 = Size)

# Combining the three trees we want to plot into a single tibble santrees
santrees <- bind_cols(ind2, ind5, ind13)
head(santrees)
```


Now that we have the data in a nice format while maintaining the order of the data(there are cleaner ways to do this), let's prepare our plot. Make sure to fill in missing code in order to run it!!

```{r final-plot,exercise=TRUE, exercise.eval=FALSE, exercise.lines = 15}
# Determine the largest y value in the dataset. Don't you hate when your axes are too short!?
mxy <- max(sun)

```


## Bar Graphs

Let's say we are interested in looking at tree height for all individuals in our data at age 14.

## Pie Graphs

## Histograms

How about we look at the distribution of heights 

## Dot Graphs

## Other Base Graph Customization

### Exercise with Code

*Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.*

Now write a function that adds any two numbers and then call it:

```{r add-function, exercise=TRUE, exercise.lines = 5}
add <- function() {
  
}
```


### Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*

Some questions to verify that you understand the purposes of various base and recommended R packages:

```{r quiz}
quiz(
  question("Which package contains functions for installing other R packages?",
    answer("base"),
    answer("tools"),
    answer("utils", correct = TRUE),
    answer("codetools")
  ),
  question("Which of the R packages listed below are used to create plots?",
    answer("lattice", correct = TRUE),
    answer("tools"),
    answer("stats"),
    answer("grid", correct = TRUE)
  )
)
```
